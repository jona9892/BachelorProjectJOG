@model Infocenter_Screen.Models.ViewModels.KundeserviceViewModel

<style>


    #MWKS {
        position: fixed;
        width: 69%;
        height: 70%;
        top: 15%;
        left: 1%;
        display: table;
    }

    #MWKSDiv {
        position: fixed;
        width: 69%;
        height: 70%;
        top: 15%;
        left: 1%;
        display: table;
    }

    #GuestsKS {
        position: fixed;
        width: 25%;
        height: 35%;
        top: 15%;
        left: 70%;
        display: table;
    }

    #KSTopDiv {
        position: fixed;
        width: 100%;
        height: 10%;
        padding: 0;
        margin-left: 0px;
        left: 0;
        padding-bottom: 1%;
        background: #294159;
    }
</style>

@section scripts{

    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var guest = $.connection.guestHub;
            var refresh = $.connection.refreshPageHub;
            var rssfeed = $.connection.rssfeedHub;

            // Create a function that the hub can call back to display messages.
            guest.client.update = function (model) {
                $.ajax({
                    type: "POST",
                    data: JSON.stringify(model),
                    url: "@Url.Action("TableData", "Kundeservice")",
                    contentType: "application/json",
                }).success(function (res) {
                    $('#todaysguestskundeservice').html(res);
                });

            };

            rssfeed.client.update = function (model) {
                $.ajax({
                    type: "POST",
                    data: JSON.stringify(model),
                    url: "@Url.Action("RSSFeedPartial", "Kundeservice")",
                    contentType: "application/json",
                }).success(function (res) {
                    $('#RSSFeed').html(res);
                });

            };

            refresh.client.refreshkundeservice = function () {
                // Add the message to the page.
                location.reload();
            };

            // Start the connection.
            $.connection.hub.start().done(function () {
                guest.server.updateGuest("Kundeservice");
                refresh.server.refreshPage("Kundeservice");
                rssfeed.server.UpdateRssfeed("Kundeservice");
            });
        })
    </script>

    <script>
        //var flag = false;
        //setInterval(function () {
        //    flag = !flag;
        //    $("#KSTopDiv").css("background", flag ? "#294159" : "#FFFFFF");
        //    $("#KSTopDiv").css("background", flag ? "#FFFFFF" : "#294159");


        //}, 6000);

    </script>
}

<head>
    <link href="@Url.Content("~/Content/StyleSheet.css")" rel="stylesheet" type="text/css" />

</head>
<body style="padding:0;">
    <div id="KSTopDiv">
        <img src=@Url.Content( "~/Images/logo.jpg") style="height:7vh; margin-top:1%; margin-left:1%;" onerror="src=@Url.Content( "~/Images/Skylight.png")" />
        <div style="bottom:0; margin-right:5%;">
            <span id="datetime" style="float:right; font-size:22px; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"></span>
        </div>

    </div>

    <div id="MWKS">
        <!--background-color: rgb(41, 128, 185);-->

        <div class="carousel slide" data-ride="carousel" data-interval="10000">
            @{
                var first = Model.Images.FirstOrDefault();
            }
            <!-- Wrapper for slides -->
            <div class="carousel-inner">
                @foreach (var item in Model.Images)
                {
                    if (@item.Equals(first))
                    {
                        <div class="item active">
                            <img src="@Url.Content(item)" style="width: 70vw; height: 70vh; margin-left: auto; margin-right: auto; display: block;" onerror="src='/Images/Skylight.png'" />
                        </div>
                    }
                    else
                    {
                        <div class="item">
                            <img src="@Url.Content(item)" style="width: 70vw; height: 70vh; margin-left: auto; margin-right: auto; display: block;" onerror="src='/Images/Skylight.png'" />
                        </div>
                    }
                }
            </div>

        </div>
    </div>

    <div id="todaysguestskundeservice">
        <div class="col-lg-4 panel-primary" id="GuestsKS" style="border:none; width:30%;">
            <div class="panel-heading" id="guestHeader" style="background-color:#294159; border-color:#294159">
                <h1 class="panel-title" align="center">Velkommen - Welcome</h1>

            </div>
            <div class="panel panel-body">

                @foreach (var item in Model.Guests)
            {
                <div class="panel panel-primary">

                    <div class="dvContainer">

                        <table style="width:100%;height:100%;">

                            <h3 style=" text-align:center; vertical-align:middle; margin-left:1%; padding:0; color: rgb(41, 128, 185); font-size: 2.5vmin; font-family: sans-serif; max-height:10px;">@item.Name </h3>

                            <tr style="border-top:solid; border-width:1px; border-color:#428bca; margin-top:2px;">
                                <td style="width:50%;text-align:center"><h3 align="center" style=" vertical-align:middle; margin-left:1%; color: rgb(41, 128, 185); font-size: 2.5vmin; font-family: sans-serif;"> <strong style="font-size:2.8vmin">@item.Company</strong></h3></td>
                                <td style="width:10%;text-align:center"><img style="height:5.5vh; width:5.5vw;" src="~/Flags/@item.Country" /></td>
                            </tr>
                        </table>
                    </div>

                </div>
        }
            </div>
        </div>
        @*@Html.Partial("~/Views/Kundeservice/_GuestsKundeservice.cshtml", Model.Guests)*@
    </div>

        <div style="position:fixed; top:89%; left:0; bottom:10%; background:#ffffff; width:100%; border-top:solid; border-top-color: #f74b4b">
            <div style=" margin-left: 1%; display:inline-block; vertical-align:middle; margin-top:10px;">
                <img src=@Url.Content("~/Images/drLogo.jpg") style="height:5vh;" />
            </div>
            <div style="left:10%; width:90%; background:#ffffff; vertical-align:middle; margin-top:10px; display:inline-block; ">
                @*
                <marquee behavior="scroll" scrollamount="5" direction="left" style="font-size:16px; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:black;">@Model.RSSFeedString</marquee>
                *@
                <p class="microsoft marquee">@Model.RSSFeed</p>
            </div>

        </div>

    <div style="position:fixed; top:97%;bottom:0; left:0; background:#294159; width:100%;">

    </div>


</body>